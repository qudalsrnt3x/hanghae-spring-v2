<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns="http://www.w3.org/1999/html">

<head th:replace="fragments.html :: head"></head>

<body>
<!-- nav -->
<div th:replace="fragments.html :: nav"></div>
<!-- /nav -->

<!-- main -->
<div th:replace="fragments.html :: main"></div>
<!-- /main -->

<div class="py-4" id="posts-detail">
    <div class="container" id="detail-box">
        <div class="row" >
            <div class="col-md-6" >
                <h2 class="pl-1" th:text="${posts.title}">제목</h2>
            </div>
            <div class="col-md-6 text-right"><a class="btn btn-primary" href="/">목록</a></div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header" th:text="|작성자 : ${posts.user.username}|"></div>
                    <div class="card-header" th:text="|작성일 : ${posts.createdAt}|"></div>
                    <div class="card-body h-50">
                        <h4 th:text="${posts.content}"></h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="py-1">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <form class="form-group">
                    <div class="input-group">
                        <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="댓글을 작성해주세요.">
                        <div class="input-group-append">
                            <button class="btn btn-info" type="button"><i class="fa fa-reply"></i></button>
                        </div>
                    </div>
                </form>
                <ul th:each="reply : ${posts.replys}" class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div th:text="${reply.content}"> 내용 </div>
                        <div class="d-flex">
                            <div th:text="|작성자 : ${reply.user.username}|"></div>&nbsp;&nbsp;&nbsp;&nbsp;

                            <button th:if="${#authentication.name} == ${reply.user.username}" class="badge badge-warning badge-pill">수정</button>&nbsp;&nbsp;
                            <button th:if="${#authentication.name} == ${reply.user.username}" class="badge badge-danger badge-pill">삭제</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div th:replace="fragments.html :: modal"></div>
<!-- /Modal -->

<hr/>

<!-- footer -->
<div th:replace="fragments.html :: footer"></div>
<!-- /footer -->

<script>
    function goLogin() {
        if(confirm("로그인이 필요합니다.")){
            location.href = '/auth/login';
        }

    }
</script>
<script src="/js/board.js" th:inline="javascript"></script>
</body>
</html>